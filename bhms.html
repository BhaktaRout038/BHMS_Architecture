<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bridge Health Management System Architecture</title>

  <!-- Mermaid CDN -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true });
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 1rem;
      max-width: 900px;
      margin: auto;
    }
    .mermaid {
      background: white;
      border: 1px solid #ddd;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    h2 {
      text-align: center;
      font-weight: 700;
    }
    footer {
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #777;
      border-top: 1px solid #ddd;
    }
    .animated-line {
      stroke-dasharray: 10;
      stroke-dashoffset: 10;
      animation: dashmove 1s linear infinite;
    }
    @keyframes dashmove {
      to {
        stroke-dashoffset: 0;
      }
    }
  </style>
</head>
<body>

  <h2>Bridge Health Management System Architecture Design</h2>

  <div class="mermaid">
graph LR
  %% Define subgraphs with quoted labels to allow emojis and multiline \n
  subgraph EDGE ["ðŸ—ï¸ Edge Layer - On Bridge"]
    Vehicle["ðŸŒ‰ Bridge"]
    Sensors["ðŸ”§ Sensors\nInclinometer\nAccelerometer\nStrain Gauge\nDisplacement"]
    Vehicle --> Sensors
  end

  subgraph NETWORK ["ðŸŒ Local Network Layer"]
    Router["ðŸ  Local Network"]
    Sensors --> Router
  end

  subgraph BACKEND ["ðŸ—„ï¸ Central Server - Backend"]
    LPU["ðŸ’» Workstation (Sensors Services)"]
    API["ðŸ–¥ï¸ Central Server\nHandles HTTP + Auth"]
    DB["ðŸ’¾ PostgreSQL DB"]
    Router --> LPU
    LPU --> API
    API --> DB
  end

  subgraph FRONTEND ["ðŸ’» Frontend - Web Application"]
    WebApp["ðŸŒ Web Application\nLogin & Live Monitoring"]
  end

  %% Arrows for data requests and responses
  WebApp -->|Data Request| API
  API -->|Data Get| WebApp

  %% Dashed style for all edges
  linkStyle default stroke-dasharray: 6, 4, stroke:#333, stroke-width:1.5px;
</div>

  <footer>
    Â©2025 TrafikSol ITS Technologies Limited. Created by Bhakta Charan Rout.
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        const mermaidSvg = document.querySelector('.mermaid svg');
        if (mermaidSvg) {
          const paths = mermaidSvg.querySelectorAll('path');
          paths.forEach(path => {
            if (path.getAttribute('marker-end')) {
              path.classList.add('animated-line');
            }
          });
        }
      }, 1000);
    });
  </script>

</body>
</html>
